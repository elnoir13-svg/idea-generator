<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="app-title">角色構思產生器</title>
    <!-- Remove the CSS link - webpack will inject it -->
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-content">
          <div class="header-left">
            <h1 data-i18n="app-title">角色構思產生器</h1>
            <p data-i18n="app-subtitle">為您的創意專案產生獨特的角色概念</p>
          </div>
          <div class="header-right">
            <button
              id="languageToggle"
              class="language-toggle"
              title="Toggle Language (EN/中文)"
              data-i18n-title="toggle-language"
            >
              <span class="language-icon">🌐</span>
            </button>
            <button
              id="themeToggle"
              class="theme-toggle"
              title="Toggle Dark/Light Mode"
              data-i18n-title="toggle-theme"
            >
              <span class="theme-icon">🌙</span>
            </button>
          </div>
        </div>
      </header>

      <main>
        <div class="section-header">
          <h2 data-i18n="properties-header">角色屬性</h2>
          <button
            class="toggle-section-btn"
            id="togglePropertiesBtn"
            title="Expand/Collapse"
            data-i18n-title="expand-collapse"
          >
            <i class="fas fa-chevron-down">🔽</i>
          </button>
        </div>
        <section class="properties-section">
          <div class="section-content" id="propertiesContent">
            <div class="property-list" id="propertyList">
              <!-- Property items will be added here dynamically -->
            </div>
            <div class="add-property">
              <input
                type="text"
                id="newPropertyName"
                placeholder="新屬性名稱（例如：種族、髮型）"
                data-i18n-placeholder="add-property-placeholder"
              />
              <button id="addPropertyBtn" data-i18n="add-property-btn">
                新增屬性
              </button>
            </div>
            <div class="json-controls">
              <button
                id="displayJsonBtn"
                class="secondary-btn"
                data-i18n="display-json-btn"
              >
                顯示 JSON
              </button>
              <button
                id="pasteJsonBtn"
                class="secondary-btn"
                data-i18n="paste-json-btn"
              >
                貼上 JSON
              </button>
              <button
                id="generateSampleBtn"
                class="secondary-btn"
                data-i18n="generate-sample-btn"
              >
                📋 生成範例
              </button>
              <button
                id="wipeDataBtn"
                class="danger-btn"
                data-i18n="wipe-data-btn"
              >
                🗑️ 清除所有資料
              </button>
              <!-- Wipe confirmation modal -->
              <div id="wipeConfirmationModal" class="confirmation-modal">
                <div class="confirmation-modal-content">
                  <h3 data-i18n="warning-title">⚠️ 警告</h3>
                  <p data-i18n="wipe-confirmation">
                    您確定要清除所有屬性資料嗎？此操作無法復原。
                  </p>
                  <div class="confirmation-buttons">
                    <button
                      id="confirmWipeBtn"
                      class="confirm-btn"
                      data-i18n="confirm-wipe-btn"
                    >
                      是的，清除所有
                    </button>
                    <button
                      id="cancelWipeBtn"
                      class="cancel-btn"
                      data-i18n="cancel-btn"
                    >
                      取消
                    </button>
                  </div>
                </div>
              </div>
              <input
                type="file"
                id="jsonFileInput"
                accept=".json"
                style="display: none"
              />
            </div>
          </div>
        </section>

        <div class="section-header">
          <h2 data-i18n="generation-header">生成設定</h2>
        </div>
        <section class="generation-section">
          <div class="generation-settings">
            <div class="setting">
              <label for="generationCount" data-i18n="generation-count-label"
                >要生成的角色數量：</label
              >
              <input type="number" id="generationCount" min="1" value="1" />
            </div>
          </div>
          <button
            id="generateBtn"
            class="generate-btn"
            data-i18n="generate-btn"
          >
            生成構思
          </button>
        </section>

        <div class="section-header">
          <h2 data-i18n="results-header">已生成的角色構思</h2>
          <button
            class="toggle-section-btn"
            id="toggleResultsBtn"
            title="Expand/Collapse"
            data-i18n-title="expand-collapse"
          >
            <i class="fas fa-chevron-down">🔽</i>
          </button>
        </div>
        <section class="results-section">
          <div class="section-content" id="resultsContent">
            <div class="results" id="resultsContainer">
              <!-- Generated ideas will appear here -->
            </div>
          </div>
        </section>
      </main>

      <!-- Enhanced return to top button -->
      <button
        id="returnToTopBtn"
        class="return-to-top"
        title="Return to top"
        data-i18n-title="return-to-top"
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7 14L12 9L17 14"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>
    </div>

    <!-- JSON Paste Modal -->
    <div id="jsonPasteModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3 data-i18n="paste-json-title">貼上 JSON 資料</h3>
        <textarea
          id="jsonPasteArea"
          placeholder="在此貼上您的 JSON 資料..."
          data-i18n-placeholder="paste-json-placeholder"
        ></textarea>
        <button
          id="importPastedJsonBtn"
          class="secondary-btn"
          data-i18n="import-btn"
        >
          匯入
        </button>
      </div>
    </div>

    <!-- Add this modal before the closing </body> tag -->
    <div id="jsonModal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h3 data-i18n="json-properties-title">JSON 屬性</h3>
          <span class="close" id="closeModal">&times;</span>
        </div>
        <div class="modal-body">
          <textarea id="jsonDisplay" readonly></textarea>
          <div class="modal-buttons">
            <button
              id="copyJsonBtn"
              class="secondary-btn"
              data-i18n="copy-clipboard-btn"
            >
              複製到剪貼簿
            </button>
            <button
              id="downloadJsonBtn"
              class="secondary-btn"
              data-i18n="download-file-btn"
            >
              下載檔案
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
